#!/bin/sh

mem=$(free -m | grep '^Mem' | awk '{print $3}')
news=$(newsboat -x print-unread | awk '{print $1}')
time=$(date "+%R")
date=$(date "+%F")

read cpu a b c previdle rest < /proc/stat
prevtotal=$((a+b+c+previdle))
sleep 0.5
read cpu a b c idle rest < /proc/stat
total=$((a+b+c+idle))
cpu=$((100*( (total-prevtotal) - (idle-previdle) ) / (total-prevtotal) ))

xsetroot -name "NEWS $news 路 CPU $cpu% 路 MEM "$mem"MiB 路 $date 路 $time"
